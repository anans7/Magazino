[{"C:\\Users\\OGOYI\\Magazino\\src\\index.js":"1","C:\\Users\\OGOYI\\Magazino\\src\\App.js":"2","C:\\Users\\OGOYI\\Magazino\\src\\reportWebVitals.js":"3","C:\\Users\\OGOYI\\Magazino\\src\\components\\Navbar.js":"4","C:\\Users\\OGOYI\\Magazino\\src\\components\\NewMagazine.js":"5","C:\\Users\\OGOYI\\Magazino\\src\\components\\Magazines.js":"6","C:\\Users\\OGOYI\\Desktop\\Magazino\\src\\index.js":"7","C:\\Users\\OGOYI\\Desktop\\Magazino\\src\\App.js":"8","C:\\Users\\OGOYI\\Desktop\\Magazino\\src\\reportWebVitals.js":"9","C:\\Users\\OGOYI\\Desktop\\Magazino\\src\\components\\Magazines.js":"10","C:\\Users\\OGOYI\\Desktop\\Magazino\\src\\components\\Navbar.js":"11","C:\\Users\\OGOYI\\Desktop\\Magazino\\src\\components\\NewMagazine.js":"12"},{"size":480,"mtime":1645619425382,"results":"13","hashOfConfig":"14"},{"size":4445,"mtime":1654953531108,"results":"15","hashOfConfig":"14"},{"size":362,"mtime":1645619164806,"results":"16","hashOfConfig":"14"},{"size":835,"mtime":1655014766980,"results":"17","hashOfConfig":"14"},{"size":1370,"mtime":1654805889231,"results":"18","hashOfConfig":"14"},{"size":1097,"mtime":1655014854177,"results":"19","hashOfConfig":"14"},{"size":480,"mtime":1645619425382,"results":"20","hashOfConfig":"21"},{"size":4468,"mtime":1655651896261,"results":"22","hashOfConfig":"21"},{"size":362,"mtime":1645619164806,"results":"23","hashOfConfig":"21"},{"size":1160,"mtime":1655651332245,"results":"24","hashOfConfig":"21"},{"size":835,"mtime":1655014766980,"results":"25","hashOfConfig":"21"},{"size":1370,"mtime":1654805889231,"results":"26","hashOfConfig":"21"},{"filePath":"27","messages":"28","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"29"},"mdna8v",{"filePath":"30","messages":"31","errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"32","usedDeprecatedRules":"29"},{"filePath":"33","messages":"34","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"29"},{"filePath":"35","messages":"36","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"37","messages":"38","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"29"},{"filePath":"39","messages":"40","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"41","messages":"42","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"1ixl2bg",{"filePath":"43","messages":"44","errorCount":0,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"45"},{"filePath":"46","messages":"47","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"48","messages":"49","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"50","messages":"51","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"52","messages":"53","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"C:\\Users\\OGOYI\\Magazino\\src\\index.js",[],["54","55"],"C:\\Users\\OGOYI\\Magazino\\src\\App.js",["56","57","58"],"import './App.css';\r\nimport \"bootstrap/dist/css/bootstrap.min.css\";\r\nimport Navbar from \"./components/Navbar\";\r\nimport { useState, useEffect, useCallback } from \"react\";\r\n\r\n\r\n\r\n\r\nimport Web3 from \"web3\";\r\nimport { newKitFromWeb3 } from \"@celo/contractkit\";\r\nimport BigNumber from \"bignumber.js\";\r\nimport IERC from \"./contract/IERC.abi.json\";\r\nimport Magazino from  './contract/Magazino.abi.json';\r\nimport Magazines from './components/Magazines';\r\nimport NewMagazine from './components/NewMagazine';\r\n\r\n\r\nconst ERC20_DECIMALS = 18;\r\n\r\n\r\nconst contractAddress = \"0x1AEfc0fAb8Bf843A4858Ae7544F6B36A68923FB8\";\r\nconst cUSDContractAddress = \"0x874069Fa1Eb16D44d622F2e0Ca25eeA172369bC1\";\r\n\r\n\r\n\r\n\r\nfunction App() {\r\n\r\n  const [contract, setcontract] = useState(null);\r\n  const [address, setAddress] = useState(null);\r\n  const [kit, setKit] = useState(null);\r\n  const [cUSDBalance, setcUSDBalance] = useState(0);\r\n  const [magazines, setMagazines] = useState([]);\r\n\r\n  const connectToWallet = async () => {\r\n    if (window.celo) {\r\n      try {\r\n        await window.celo.enable();\r\n        const web3 = new Web3(window.celo);\r\n        let kit = newKitFromWeb3(web3);\r\n\r\n        const accounts = await kit.web3.eth.getAccounts();\r\n        const user_address = accounts[0];\r\n\r\n        kit.defaultAccount = user_address;\r\n\r\n        await setAddress(user_address);\r\n        await setKit(kit);\r\n      } catch (error) {\r\n        console.log(error);\r\n      }\r\n    } else {\r\n      console.log(\"Error Occurred\");\r\n      \r\n     }\r\n   };\r\n \r\n    \r\n   const getBalance = (async () => {\r\n    try {\r\n      const balance = await kit.getTotalBalance(address);\r\n      const USDBalance = balance.cUSD.shiftedBy(-ERC20_DECIMALS).toFixed(2);\r\n      const contract = new kit.web3.eth.Contract(Magazino, contractAddress);\r\n      setcontract(contract);\r\n      setcUSDBalance(USDBalance);\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  });\r\n\r\n\r\n  \r\n  const unpublishMagazine = async (_index) => {\r\n    try {\r\n      await contract.methods.unpublishMagazine(_index).send({ from: address });\r\n      getMagazine();\r\n      getBalance();\r\n    } catch (error) {\r\n      alert(error);\r\n    }};\r\n   \r\n\r\n \r\n   \r\n   const getMagazine =  async () => {\r\n     const magazinesLength = await contract.methods.getmagazinesLength().call();\r\n     console.log(magazinesLength);\r\n     const _magazinn = []\r\n     for (let index = 0; index < magazinesLength; index++) {\r\n       console.log(magazinesLength);\r\n       let _magazines = new Promise(async (resolve, reject) => {\r\n       let magazine = await contract.methods.getMagazine(index).call();\r\n\r\n       resolve({\r\n        index: index,\r\n        owner: magazine[0],\r\n        image: magazine[1],\r\n        name: magazine[2],\r\n        edition: magazine[3],\r\n       price: magazine[4],\r\n       magazineid: magazine[5]\r\n\r\n                 \r\n      });\r\n    });\r\n    _magazinn.push(_magazines);\r\n  }\r\n  const _magazines = await Promise.all(_magazinn);\r\n  setMagazines(_magazines);\r\n  console.log(magazines)\r\n  \r\n};\r\n\r\n\r\nuseEffect(() => {\r\n  connectToWallet();\r\n}, []);\r\n\r\nuseEffect(() => {\r\n  if (kit && address) {\r\n    getBalance();\r\n   \r\n  }\r\n}, [kit, address]);\r\n\r\nuseEffect(() => {\r\n  if (contract) {\r\n    getMagazine();\r\n  }\r\n}, [contract]);  \r\n\r\n\r\nconst addMagazine = async (\r\n  _image,\r\n  _name,\r\n  _edition,\r\n  price\r\n) => {\r\n\r\n  const _price = new BigNumber(price).shiftedBy(ERC20_DECIMALS).toString();\r\n    try {\r\n      await contract.methods\r\n        .addMagazine(_image, _name, _edition, _price)\r\n        .send({ from: address });\r\n       getMagazine();\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  };\r\n\r\n  const buyMagazine = async (_index,) => {\r\n    try {\r\n      const cUSDContract = new kit.web3.eth.Contract(IERC, cUSDContractAddress);\r\n    \r\n      \r\n      await cUSDContract.methods\r\n        .approve(contractAddress, magazines[_index].price)\r\n        .send({ from: address });\r\n      await contract.methods.buyMagazine(_index).send({ from: address });\r\n      getMagazine();\r\n      getBalance();\r\n    } catch (error) {\r\n      console.log(error)\r\n    }};\r\n\r\n  \r\n\r\n\r\n\r\n  return (\r\n    <div>\r\n      <Navbar balance = {cUSDBalance} />\r\n      <Magazines magazines ={magazines}\r\n      buyMagazine = {buyMagazine}\r\n      unpublishMagazine = {unpublishMagazine}\r\n       \r\n       \r\n      \r\n       \r\n      />\r\n       <NewMagazine addMagazine = {addMagazine}\r\n       \r\n/>\r\n    </div>\r\n    )\r\n  }\r\n\r\nexport  default App;\r\n","C:\\Users\\OGOYI\\Magazino\\src\\reportWebVitals.js",[],"C:\\Users\\OGOYI\\Magazino\\src\\components\\Navbar.js",[],"C:\\Users\\OGOYI\\Magazino\\src\\components\\NewMagazine.js",[],"C:\\Users\\OGOYI\\Magazino\\src\\components\\Magazines.js",[],"C:\\Users\\OGOYI\\Desktop\\Magazino\\src\\index.js",[],"C:\\Users\\OGOYI\\Desktop\\Magazino\\src\\App.js",["59","60","61"],"import './App.css';\r\nimport \"bootstrap/dist/css/bootstrap.min.css\";\r\nimport Navbar from \"./components/Navbar\";\r\nimport { useState, useEffect, useCallback } from \"react\";\r\n\r\n\r\n\r\n\r\nimport Web3 from \"web3\";\r\nimport { newKitFromWeb3 } from \"@celo/contractkit\";\r\nimport BigNumber from \"bignumber.js\";\r\nimport IERC from \"./contract/IERC.abi.json\";\r\nimport Magazino from  './contract/Magazino.abi.json';\r\nimport Magazines from './components/Magazines';\r\nimport NewMagazine from './components/NewMagazine';\r\n\r\n\r\nconst ERC20_DECIMALS = 18;\r\n\r\n\r\nconst contractAddress = \"0x3E9E94aB53f989173e212E64275D80e5e4bB75a0\";\r\nconst cUSDContractAddress = \"0x874069Fa1Eb16D44d622F2e0Ca25eeA172369bC1\";\r\n\r\n\r\n\r\n\r\nfunction App() {\r\n\r\n  const [contract, setcontract] = useState(null);\r\n  const [address, setAddress] = useState(null);\r\n  const [kit, setKit] = useState(null);\r\n  const [cUSDBalance, setcUSDBalance] = useState(0);\r\n  const [magazines, setMagazines] = useState([]);\r\n\r\n  const connectToWallet = async () => {\r\n    if (window.celo) {\r\n      try {\r\n        await window.celo.enable();\r\n        const web3 = new Web3(window.celo);\r\n        let kit = newKitFromWeb3(web3);\r\n\r\n        const accounts = await kit.web3.eth.getAccounts();\r\n        const user_address = accounts[0];\r\n\r\n        kit.defaultAccount = user_address;\r\n\r\n        await setAddress(user_address);\r\n        await setKit(kit);\r\n      } catch (error) {\r\n        console.log(error);\r\n      }\r\n    } else {\r\n      console.log(\"Error Occurred\");\r\n      \r\n     }\r\n   };\r\n \r\n    \r\n   const getBalance = (async () => {\r\n    try {\r\n      const balance = await kit.getTotalBalance(address);\r\n      const USDBalance = balance.cUSD.shiftedBy(-ERC20_DECIMALS).toFixed(2);\r\n      const contract = new kit.web3.eth.Contract(Magazino, contractAddress);\r\n      setcontract(contract);\r\n      setcUSDBalance(USDBalance);\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  });\r\n\r\n\r\n  \r\n  const unpublishMagazine = async (_index) => {\r\n    try {\r\n      await contract.methods.unpublishMagazine(_index).send({ from: address });\r\n      getMagazine();\r\n      getBalance();\r\n    } catch (error) {\r\n      alert(error);\r\n    }};\r\n   \r\n\r\n \r\n   \r\n   const getMagazine =  async () => {\r\n     const magazinesLength = await contract.methods.getmagazineslength().call();\r\n     console.log(magazinesLength);\r\n     const _magazinn = []\r\n     for (let index = 0; index < magazinesLength; index++) {\r\n       console.log(magazinesLength);\r\n       let _magazines = new Promise(async (resolve, reject) => {\r\n       let magazine = await contract.methods.getMagazine(index).call();\r\n\r\n       resolve({\r\n        index: index,\r\n        owner: magazine[0],\r\n        image: magazine[1],\r\n        name: magazine[2],\r\n        edition: magazine[3],\r\n       price: magazine[4],\r\n       magazineid: magazine[5]\r\n\r\n                 \r\n      });\r\n    });\r\n    _magazinn.push(_magazines);\r\n  }\r\n  const _magazines = await Promise.all(_magazinn);\r\n  setMagazines(_magazines);\r\n  console.log(magazines)\r\n  \r\n};\r\n\r\n\r\nuseEffect(() => {\r\n  connectToWallet();\r\n}, []);\r\n\r\nuseEffect(() => {\r\n  if (kit && address) {\r\n    getBalance();\r\n   \r\n  }\r\n}, [kit, address]);\r\n\r\nuseEffect(() => {\r\n  if (contract) {\r\n    getMagazine();\r\n  }\r\n}, [contract]);  \r\n\r\n\r\nconst addMagazine = async (\r\n  _image,\r\n  _name,\r\n  _edition,\r\n  price\r\n) => {\r\n\r\n  const _price = new BigNumber(price).shiftedBy(ERC20_DECIMALS).toString();\r\n    try {\r\n      await contract.methods\r\n        .addMagazine(_image, _name, _edition, _price)\r\n        .send({ from: address });\r\n       getMagazine();\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  };\r\n\r\n  const buyMagazine = async (_index,) => {\r\n    try {\r\n      const cUSDContract = new kit.web3.eth.Contract(IERC, cUSDContractAddress);\r\n    \r\n      \r\n      await cUSDContract.methods\r\n        .approve(contractAddress, magazines[_index].price)\r\n        .send({ from: address });\r\n      await contract.methods.buyMagazine(_index).send({ from: address });\r\n      getMagazine();\r\n      getBalance();\r\n    } catch (error) {\r\n      console.log(error)\r\n    }};\r\n\r\n  \r\n\r\n\r\n\r\n  return (\r\n    <div>\r\n      <Navbar balance = {cUSDBalance} />\r\n      <Magazines magazines ={magazines}\r\n      buyMagazine = {buyMagazine}\r\n      unpublishMagazine = {unpublishMagazine}\r\n      Owner={address}\r\n       \r\n       \r\n      \r\n       \r\n      />\r\n       <NewMagazine addMagazine = {addMagazine}\r\n       \r\n/>\r\n    </div>\r\n    )\r\n  }\r\n\r\nexport  default App;\r\n","C:\\Users\\OGOYI\\Desktop\\Magazino\\src\\reportWebVitals.js",[],"C:\\Users\\OGOYI\\Desktop\\Magazino\\src\\components\\Magazines.js",[],"C:\\Users\\OGOYI\\Desktop\\Magazino\\src\\components\\Navbar.js",[],"C:\\Users\\OGOYI\\Desktop\\Magazino\\src\\components\\NewMagazine.js",[],{"ruleId":"62","replacedBy":"63"},{"ruleId":"64","replacedBy":"65"},{"ruleId":"66","severity":1,"message":"67","line":4,"column":31,"nodeType":"68","messageId":"69","endLine":4,"endColumn":42},{"ruleId":"70","severity":1,"message":"71","line":124,"column":4,"nodeType":"72","endLine":124,"endColumn":18,"suggestions":"73"},{"ruleId":"70","severity":1,"message":"74","line":130,"column":4,"nodeType":"72","endLine":130,"endColumn":14,"suggestions":"75"},{"ruleId":"66","severity":1,"message":"67","line":4,"column":31,"nodeType":"68","messageId":"69","endLine":4,"endColumn":42},{"ruleId":"70","severity":1,"message":"71","line":124,"column":4,"nodeType":"72","endLine":124,"endColumn":18,"suggestions":"76"},{"ruleId":"70","severity":1,"message":"74","line":130,"column":4,"nodeType":"72","endLine":130,"endColumn":14,"suggestions":"77"},"no-native-reassign",["78"],"no-negated-in-lhs",["79"],"no-unused-vars","'useCallback' is defined but never used.","Identifier","unusedVar","react-hooks/exhaustive-deps","React Hook useEffect has a missing dependency: 'getBalance'. Either include it or remove the dependency array.","ArrayExpression",["80"],"React Hook useEffect has a missing dependency: 'getMagazine'. Either include it or remove the dependency array.",["81"],["82"],["83"],"no-global-assign","no-unsafe-negation",{"desc":"84","fix":"85"},{"desc":"86","fix":"87"},{"desc":"84","fix":"88"},{"desc":"86","fix":"89"},"Update the dependencies array to be: [kit, address, getBalance]",{"range":"90","text":"91"},"Update the dependencies array to be: [contract, getMagazine]",{"range":"92","text":"93"},{"range":"94","text":"91"},{"range":"95","text":"93"},[3150,3164],"[kit, address, getBalance]",[3236,3246],"[contract, getMagazine]",[3150,3164],[3236,3246]]